### 問題の選択肢

------

1. モデル
   - アソシエーションの整理
     - question モデル
       - `has_many :choices, dependent: :destroy`
       - `accepts_nested_attributes_for :choices, allow_destroy: true`
         ＊親モデルのフォームで子モデルの情報も一緒に送信・保存ができるようになる記述
         ＊フォームには親モデルを渡すだけで子モデルのCRUDも完成する
     - choice モデル
       - `belongs_to :question`
       - `content:string`
       - `is_correct:boolean`
   - マイグレーションの実行
     　属性の決定からしなくてはならないね。
     - 選択肢（ content : string）
     - 正誤判断（ is_correct : boolean）
   
2. ルート
   - 導線を新たに増やす作業を行うわけではないので今回は触らなくても良い
   - と、思ったが解答の入力画面や解答の結果画面が必要になってくるので、それも付け加えなくてはならない（解答モデル時）
   - 問題をカテゴリやリストにしてまとめる場合にはリザルト画面も欲しいのでそれも機能として必要である（同上）
   
3. コントローラー
   - 扱うデータが増えるのでストロングパラメータの機能を追加する
   
     ```ruby
     # app/controllers/questions_controller.rb
     def question_params
       params.require(:question).permit(
         :title, :description,
         choices_attributes: [:id, :content, :is_correct, :_destroy]
       )
     end
     ```
   
     
   
     
   
   - また、問題作成時や編集時に選択肢設定・解答設定をしなくてはならないのでそのアクションも必要
   
4. ビュー
   - 選択肢を入力するフォームの追加が必要
   - モデルの設定はどうなるのだろうか、どうやって指定するのかが気になるところではある。




#### わからないところ

・turboストリームの処理の仕方

・四つの選択肢は必須にした方が良いかもしれない（一回実装してみて、問題があればやってみる）



### コメント（新しく知ったもの）

------

単純なCRUDは基本的にchatgptに聞くだけで実装までたどり着けたが、機能が複雑化していくとchatgptに聞いてもトンチンカンなanswerしか返ってこなくなるな...。やっぱり設計は自分でしないといけない感じだね。

選択肢テーブルはどれが正解であるか、というデータを属性として有しているが、解答モデルは「どんなユーザーが解答したか」「その解答は合っていたのか、間違っていたのか、何回正解して、何回間違えたのか」というデータを属性として有しているので、性質が全く違う、分離が必要。

view画面でモデルがどんなふうに渡されているのかをもう一回きちんと自分の中に落としたいね。



