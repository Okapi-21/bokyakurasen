<div class="category-header">
  <div class="breadcrumb">
    <%= link_to 'ホーム', root_path %> ＞ <%= link_to 'カテゴリ', categories_path %> ＞ <span><%= @category.name %></span>
  </div>

  <div class="header-main">
    <h1><%= @category.name %></h1>
    <p class="lead"><%= simple_format(@category.description.to_s) %></p>
    <div class="header-actions">
      <% first_q = @questions.first %>
      <% if first_q %>
        <%= link_to 'このカテゴリを開始', start_question_path(first_q, category_id: @category.id), class: 'btn btn-primary large' %>
      <% end %>
      <%= link_to '戻る', categories_path, class: 'btn' %>
    </div>
  </div>
</div>

<div class="category-stats">
  <span>問題数: <strong><%= @questions.size %></strong></span>
  <!-- placeholder for filters/tags in future -->
</div>

<div class="question-grid">
  <% @questions.each do |q| %>
    <article class="question-card">
      <header>
        <h3><%= link_to q.title, question_path(q) %></h3>
      </header>
      <section class="excerpt">
        <%= truncate(strip_tags(q.description.to_s), length: 220) %>
      </section>
      <footer class="meta">
        <small>作成者: <%= q.user.name %></small>
        <div class="card-actions">
          <%= link_to '詳細', question_path(q), class: 'btn' %>
          <%= link_to 'この問題から始める', start_question_path(q, category_id: @category.id), class: 'btn btn-primary' %>
        </div>
      </footer>
    </article>
  <% end %>
</div>

<style>
.category-header { border-bottom:1px solid #eee; margin-bottom:16px; padding-bottom:12px }
.breadcrumb { color:#666; font-size:0.9rem; margin-bottom:6px }
.header-main h1 { margin:0 }
.header-main .lead { color:#444; margin:6px 0 12px }
.header-actions { display:flex; gap:8px }
.btn.large { padding:10px 14px }
.category-stats { margin:12px 0; color:#555 }
.question-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap:14px }
.question-card { border:1px solid #e6e6e6; padding:12px; border-radius:8px; background:#fff }
.question-card header h3 { margin:0 0 8px 0 }
.excerpt { color:#333; margin-bottom:10px }
.meta { display:flex; justify-content:space-between; align-items:center }
.card-actions { display:flex; gap:8px }
.btn { padding:6px 10px; border:1px solid #ccc; border-radius:6px; background:#f7f7f7; color:#333; text-decoration:none }
.btn-primary { background:#2b6cb0; color:#fff; border-color:#2b6cb0 }
</style>
